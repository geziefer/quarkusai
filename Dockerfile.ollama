FROM ollama/ollama

# Pull models during build with better error handling
RUN /bin/ollama serve & \
    sleep 15 && \
    /bin/ollama pull llama3.2:3b && \
    /bin/ollama pull nomic-embed-text && \
    pkill ollama

# Start ollama serve by default
CMD ["serve"]
